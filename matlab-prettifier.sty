%%
%% This is file `matlab-prettifier.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% matlab-prettifier.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2014 by Julien Cretel <jubobs.matlab.prettifier at gmail.com>
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%% 
%%     http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is Julien Cretel.
%% 
%% This work currently consists of the files matlab-prettifier.dtx,
%% matlab-prettifier.ins, and the derived file matlab-prettifier.sty.
%% 
\NeedsTeXFormat{LaTeX2e}[2011/06/27]
\ProvidesPackage{matlab-prettifier}
  [2014/04/24 v0.1a A package for prettyprinting Matlab source code]



\newcommand\lstoptcheck@mlpr[1]
{%
  \@ifpackagewith{listings}{#1}%
  {
    \PackageError{matlab-prettifier}%
      {incompatible listings' option #1}%
      {%
        Make sure the `listings' package
        doesn't get loaded with option `#1'%
      }
  }
  {}
}
\lstoptcheck@mlpr{noaspects}
\lstoptcheck@mlpr{0.21}
\lstoptcheck@mlpr{savemem}
\DeclareOption*%
{%
  \OptionNotUsed
  \PackageWarning{matlab-prettifier}{Unknown `\CurrentOption' option}
}
\ProcessOptions\relax
\RequirePackage{textcomp}[2005/09/27]
\RequirePackage{xcolor}[2007/01/21]
\RequirePackage{listings}[2013/08/26]
\lst@Key{mlkeywordstyle}\relax%
  {\renewcommand\keywordStyle@mlpr{#1}}
\lst@Key{mllastelementstyle}\relax%
  {\renewcommand\lastElemStyle@mlpr{#1}}
\lst@Key{mloverride}{false}[t]%
  {\lstKV@SetIf{#1}\ifOverridecontext@mlpr@}
\lst@Key{mlstringstyle}\relax%
  {\renewcommand\stringStyle@mlpr{#1}}
\lst@Key{mlcommentstyle}\relax%
  {\renewcommand\commentStyle@mlpr{#1}}
\lst@Key{mlsectiontitlestyle}\relax
  {\renewcommand\sectionTitleStyle@mlpr{#1}}
\lst@Key{mlshowsectionrules}{false}[t]%
  {\lstKV@SetIf{#1}\ifShowCellrules@mlpr@}
\lst@Key{mlsectionrulethickness}\relax%
  {\renewcommand\sectionRuleRT@mlpr{#1}}
\lst@Key{mlsectionrulecolor}\relax%
  {\colorlet{sectionRuleColor@mlpr}{#1}}
\lst@Key{mlsyscomstyle}\relax%
  {\renewcommand\syscomStyle@mlpr{#1}}
\gdef\InstallKeywords@mlpr#1#2#3#4#5%
{%
  \lst@Key{ml#2}\relax
    {\lst@UseFamily{#2}[\@ne]##1\relax\lst@MakeKeywords}%
  \lst@Key{mlmore#2}\relax
    {\lst@UseFamily{#2}[\@ne]##1\relax\lst@MakeMoreKeywords}%
  \lst@Key{mldelete#2}\relax
    {\lst@UseFamily{#2}[\@ne]##1\relax\lst@DeleteKeywords}%
  \ifx\@empty#3\@empty\else
     \lst@Key{#3}{#4}{\@namedef{lst@#3}{##1}}%
  \fi
  \expandafter\lst@InstallFamily@
     \csname\@lst @#2@data\expandafter\endcsname
     \csname\@lst @#5\endcsname {#1}{#2}{#3}
}
\InstallKeywords@mlpr k{sharedvars}{mlsharedvarstyle}\relax%
  {mlsharedvarstyle}{}ld
\lst@Key{mlunquotedstringdelim}\relax%
  {\lst@DelimKey\relax{[is][\stringStyle@mlpr]{#1}}}
\lst@Key{mlplaceholderstyle}\relax%
  {\renewcommand\phStyle@mlpr{#1}}
\lst@Key{mlscaleinline}{true}[t]%
  {\lstKV@SetIf{#1}\ifScaleInline@mlpr@}
\newcommand\language@mlpr{Matlab-pretty}
\expandafter\lst@NormedDef\expandafter\languageNormedDefd@mlpr%
  \expandafter{\language@mlpr}
\expandafter\expandafter\expandafter\lstdefinelanguage\expandafter%
{\language@mlpr}
{%
  sensitive=true,
  upquote=true,
  showspaces=false,
  showstringspaces=false,
  rulecolor=\color{black},
  alsoother={\$@},
  MoreSelectCharTable=\MoreSelectCharTable@mlpr,
  basicstyle=\basicStyle@mlpr,
  morekeywords=[257]%
  {%
    for,
    if,
    otherwise,
    parfor,
    spmd,
    switch,
    try,
    while,
  },
  keywordstyle=[257]\processOpRegKW@mlpr,
  morekeywords=[258]%
  {%
    break,
    case,
    catch,
    continue,
    else,
    elseif,
    function,
    return,
  },
  keywordstyle=[258]\processMidKW@mlpr,
  morekeywords=[259]%
  {%
    global,
    persistent,
  },
  keywordstyle=[259]\processStdaKW@mlpr,
  morekeywords=[260]{classdef},
  keywordstyle=[260]\processClassdefKW@mlpr,
  morekeywords=[261]%
  {%
    enumeration,
    events,
    methods,
    properties,
  },
  keywordstyle=[261]\processMidClassdefKW@mlpr,
  morekeywords=[262]{end},
  keywordstyle=[262]\processEndKW@mlpr,
  morestring=[m]',
  stringstyle=\processString@mlpr,
  morecomment=[l]\%,
  morecomment=[n]{\%\{\^^M}{\%\}\^^M},
  commentstyle=\commentStyle@mlpr,
  moredelim=**[il][\processDotDotDot@mlpr]{...},
  moredelim=[l][\processSectionTitle@mlpr]{\%\%\ },
  moredelim=[l][\syscomStyle@mlpr]{!},
  mlsharedvarstyle=\processSharedVar@mlpr,
}[
  keywords,
  strings,
  comments,
]
\newcount\netBracketCount@mlpr
\newcount\blkLvl@mlpr
\newcount\blkLvlAtClassdef@mlpr
\newif\ifClosingEndKW@mlpr@             \ClosingEndKW@mlpr@true
\newif\ifInClassdef@mlpr@                 \InClassdef@mlpr@false
\newif\ifInStr@mlpr@                           \InStr@mlpr@false
\newif\ifVisCharOccured@mlpr@       \VisCharOccured@mlpr@false
\newif\ifWithinSectionTitle@mlpr@ \WithinSectionTitle@mlpr@false
\newcommand\resetEndKW@mlpr
{%
  \global\ClosingEndKW@mlpr@true%
  \global\netBracketCount@mlpr=0%
}
\newcommand\resetClassdefKW@mlpr
{%
  \global\InClassdef@mlpr@false%
  \global\blkLvl@mlpr=0%
  \global\blkLvlAtClassdef@mlpr=0%
}
%%
\newcommand\ttfamilymlpr
{%
  \def\fvm@Scale{.85}%
  \fontfamily{fvm}\selectfont%
  \normalsize%
}
\newcommand\basicFontSpecs@mlpr\ttfamilymlpr
\newcommand\keywordFontSpecs@mlpr{}
\newcommand\lastElemFontSpecs@mlpr{}
\newcommand\stringFontSpecs@mlpr{}
\newcommand\commentFontSpecs@mlpr{}
\newcommand\sectionTitleFontSpecs@mlpr{\commentFontSpecs@mlpr\bfseries}
\newcommand\sectionRuleRT@mlpr{.05}
\newcommand\syscomFontSpecs@mlpr{}
\newcommand\sharedvarFontSpecs@mlpr{}
\newcommand\phOpDelim@mlpr{\textlangle}
\newcommand\phClDelim@mlpr{\textrangle}
\newcommand\phDelimFontSpecs@mlpr{\rmfamily\upshape}
\newcommand\phContentFontSpecs@mlpr{\rmfamily\itshape}
\colorlet{textColor@mlpr}{black}
\colorlet{lastElemColor@mlpr}{textColor@mlpr}
\definecolor{keywordColor@mlpr}     {RGB}{000,000,255}
\definecolor{stringColor@mlpr}      {RGB}{160,032,240}
\definecolor{commentColor@mlpr}     {RGB}{034,139,034}
\colorlet{sectionTitleColor@mlpr}{commentColor@mlpr}
\colorlet{sectionRuleColor@mlpr}{black!15}
\definecolor{syscomColor@mlpr}      {RGB}{178,140,000}
\definecolor{sharedvarColor@mlpr}   {RGB}{000,163,163}
\definecolor{phColor@mlpr}          {RGB}{209,000,086}
\colorlet{numbersColor@matlabpretty}{gray}
\colorlet{bgColor@mlpr}{white}
\definecolor{untermStringColor@mlpr}{RGB}{178,000,000}
\definecolor{syntaxErrorColor@mlpr}{RGB} {255,000,000}
\newcommand\basicStyle@mlpr
{%
  \basicFontSpecs@mlpr%
  \color{textColor@mlpr}%
}
\newcommand\lastElemStyle@mlpr
{%
  \lastElemFontSpecs@mlpr%
  \color{lastElemColor@mlpr}%
}
\newcommand\keywordStyle@mlpr
{%
  \keywordFontSpecs@mlpr%
  \color{keywordColor@mlpr}%
}
\newcommand\stringStyle@mlpr
{%
  \global\InStr@mlpr@true%
  \stringFontSpecs@mlpr%
  \color{stringColor@mlpr}%
}
\newcommand\commentStyle@mlpr
{%
  \commentFontSpecs@mlpr%
  \color{commentColor@mlpr}%
}
\newcommand\sectionTitleStyle@mlpr
{%
  \sectionTitleFontSpecs@mlpr%
  \color{sectionTitleColor@mlpr}%
}
\newcommand\syscomStyle@mlpr
{%
  \syscomFontSpecs@mlpr%
  \color{syscomColor@mlpr}%
}
\newcommand\sharedvarStyle@mlpr
{%
  \sharedvarFontSpecs@mlpr%
  \color{sharedvarColor@mlpr}%
}
\newcommand\phStyle@mlpr
{%
  \phContentFontSpecs@mlpr%
  \color{phColor@mlpr}%
}
\newcommand\MoreSelectCharTable@mlpr
{%
  \processOpenBracket@mlpr{`(}{\roundBktOp@mlpr}%
  \processOpenBracket@mlpr{`[}{\squareBktOp@mlpr}%
  \processOpenBracket@mlpr{`\{}{\curlyBktOp@mlpr}%
  \processCloseBracket@mlpr{`)}{\roundBktCl@mlpr}%
  \processCloseBracket@mlpr{`]}{\squareBktCl@mlpr}%
  \processCloseBracket@mlpr{`\}}{\curlyBktCl@mlpr}%
}
\newcommand\processOpenBracket@mlpr[2]
{%
  \lst@DefSaveDef{#1}#2%
  {%
    #2%
    \ifnum\lst@mode=\lst@Pmode\relax%
      \global\ClosingEndKW@mlpr@false%
      \global\advance\netBracketCount@mlpr by \@ne%
    \fi
  }%
}
\newcommand\processCloseBracket@mlpr[2]
{%
  \lst@DefSaveDef{#1}#2%
  {%
    #2%
    \ifnum\lst@mode=\lst@Pmode\relax%
      \ifClosingEndKW@mlpr@%
        \netBracketCount@mlpr=0%
      \else
        \global\advance\netBracketCount@mlpr by \m@ne%
        \ifnum\netBracketCount@mlpr>0%
        \else
          \global\ClosingEndKW@mlpr@true%
        \fi
      \fi
    \fi
  }%
}
\newcommand\processOpRegKW@mlpr
{%
  \resetEndKW@mlpr%
  \global\advance\blkLvl@mlpr\@ne%
  \keywordStyle@mlpr%
}
\newcommand\processMidKW@mlpr
{%
  \resetEndKW@mlpr%
  \keywordStyle@mlpr%
}
\newcommand\processStdaKW@mlpr\processMidKW@mlpr
\newcommand\processClassdefKW@mlpr
{%
  \resetEndKW@mlpr%
  \global\InClassdef@mlpr@true%
  \global\blkLvlAtClassdef@mlpr=\blkLvl@mlpr%
  \global\advance\blkLvl@mlpr\@ne%
  \keywordStyle@mlpr%
}
\newcommand\processMidClassdefKW@mlpr
{%
  \ifOverridecontext@mlpr@%
    \keywordStyle@mlpr%
  \else
    \ifInClassdef@mlpr@%
      \resetEndKW@mlpr%
      \global\advance\blkLvl@mlpr\@ne%
      \keywordStyle@mlpr%
    \fi
  \fi
}
\newcommand\processEndKW@mlpr
{%
  \ifOverridecontext@mlpr@%
    \lastElemStyle@mlpr%
  \else
    \ifClosingEndKW@mlpr@%
      \ifnum\blkLvl@mlpr>0%
        \global\advance\blkLvl@mlpr\m@ne%
      \fi
      \ifnum\blkLvl@mlpr=\blkLvlAtClassdef@mlpr%
        \global\InClassdef@mlpr@false%
      \fi
      \keywordStyle@mlpr%
    \else
      \lastElemStyle@mlpr%
    \fi
  \fi
}
\newcommand\processString@mlpr{\stringStyle@mlpr}
\newcommand\processDotDotDot@mlpr
{%
  \lst@CalcLostSpaceAndOutput%
  {\keywordStyle@mlpr...}%
  \lst@Lmodetrue%
  \commentStyle@mlpr%
}
\newlength\emHeight@mlpr
\newlength\jayDepth@mlpr
\newlength\sectionRuleOffset@mlpr
\newcommand\processSectionTitle@mlpr
{%
  \ifWithinSectionTitle@mlpr@%
    \sectionTitleStyle@mlpr%
  \else
    \ifVisCharOccured@mlpr@%
      \commentStyle@mlpr%
    \else % a section title is starting here
      \global\WithinSectionTitle@mlpr@true%
      \resetEndKW@mlpr%
      \ifShowCellrules@mlpr@%
        \drawSectionRule@mlpr%
      \fi
      \sectionTitleStyle@mlpr%
    \fi
  \fi
}
\newcommand\drawSectionRule@mlpr
{%
  \setlength\emHeight@mlpr{\fontcharht\font`M}%
  \setlength\jayDepth@mlpr{\fontchardp\font`j}%
  \setlength\sectionRuleOffset@mlpr%
  {%
    \dimexpr.5\emHeight@mlpr%
           +.5\baselineskip%
           -.5\jayDepth@mlpr\relax%
  }%
  \bgroup%
  \color{sectionRuleColor@mlpr}%
    \makebox[0em][l]%
    {%
      \raisebox{\sectionRuleOffset@mlpr}[0pt][0pt]%
        {\rule{\lst@linewidth}{\sectionRuleRT@mlpr\baselineskip}}%
    }%
  \egroup%
}
\newcommand\processSharedVar@mlpr{\sharedvarStyle@mlpr}
\newcommand\localFontSize@mlpr{}
\newcommand\localBaselineskip@mlpr{}
\newcommand\scaleInlineCode@mlpr
{%
  \lst@ifdisplaystyle%
  \else
    \ifScaleInline@mlpr@%
      \let\localFontSize@mlpr\f@size%
      \let\localBaselineskip@mlpr\f@baselineskip%
      \expandafter\def\expandafter\lst@basicstyle\expandafter%
      {%
        \lst@basicstyle%
        \fontsize{\localFontSize@mlpr}{\localBaselineskip@mlpr}\selectfont%
      }%
    \fi
  \fi
}
\newcommand\addedToInitVarsEOL@mlpr{}
\lst@AddToHook{InitVarsEOL}{\addedToInitVarsEOL@mlpr}
\newcommand\@ddedToInitVarsEOL@mlpr
{%
  \ifInStr@mlpr@%
    \global\InStr@mlpr@false%
    \lst@LeaveMode%
  \fi
  \global\WithinSectionTitle@mlpr@false%
  \global\VisCharOccured@mlpr@false%
}
\newcommand\addedToEndGroup@mlpr{}
\lst@AddToHook{EndGroup}{\addedToEndGroup@mlpr}
\newcommand\@ddedToEndGroup@mlpr{\global\InStr@mlpr@false}
\newcommand\addedToPostOutput@mlpr{}
\lst@AddToHook{PostOutput}{\addedToPostOutput@mlpr}
\newcommand\@ddedToPostOutput@mlpr
{%
  \lst@ifwhitespace%
  \else
    \global\VisCharOccured@mlpr@true%
  \fi
}
\newcommand\addedToPreInitHook@mlpr
{%
  \ifx\lst@language\languageNormedDefd@mlpr%
    \scaleInlineCode@mlpr%
    \renewcommand\addedToInitVarsEOL@mlpr\@ddedToInitVarsEOL@mlpr%
    \renewcommand\addedToEndGroup@mlpr\@ddedToEndGroup@mlpr%
    \renewcommand\addedToPostOutput@mlpr\@ddedToPostOutput@mlpr%
\fi
}
\lst@AddToHook{PreInit}{\addedToPreInitHook@mlpr}
\newcommand\addedToDeInitHook@mlpr
{%
  \ifx\lst@language\languageNormedDefd@mlpr%
    \resetEndKW@mlpr%
    \resetClassdefKW@mlpr%
    \InStr@mlpr@false%
    \VisCharOccured@mlpr@false%
    \WithinSectionTitle@mlpr@false%
  \fi
}
\lst@AddToHook{DeInit}{\addedToDeInitHook@mlpr}
\newcommand\snippetPlaceholder[1]
{%
  \bgroup%
    \phStyle@mlpr%
    \bgroup%
      \phDelimFontSpecs@mlpr%
      \phOpDelim@mlpr%
    \egroup%
    #1\itcorr@mlpr%
    \bgroup%
      \phDelimFontSpecs@mlpr%
      \phClDelim@mlpr%
    \egroup%
  \egroup%
}
\newcommand\itcorr@mlpr
{%
  \expandafter\newcommand\expandafter\long@f@shape@mlpr\expandafter{\f@shape}%
  \ifx\long@f@shape@mlpr\itdefault%
    \/%
  \else
    \ifx\long@f@shape@mlpr\sldefault%
      \/%
    \fi
  \fi
}
\lstdefinestyle{Matlab-stdstyle}
{
  language    = \languageNormedDefd@mlpr,
  frame       = single,
  rulecolor   = \color{black!67},
  numbers     = left,
  numberstyle = \color{black!33},
  breaklines  = true,
}
\lstdefinestyle{Matlab-bwstyle}
{
  language            = \languageNormedDefd@mlpr,
  mlkeywordstyle      = \color[gray]{0}  \bfseries          ,
  mlcommentstyle      = \color[gray]{.75}           \itshape,
  mlstringstyle       = \color[gray]{.5}                    ,
  mlsyscomstyle       = \color[gray]{.25}                   ,
  mlsectiontitlestyle = \color[gray]{.75}\bfseries  \itshape,
  mlsharedvarstyle    = \color[gray]{0}                     ,
  mlplaceholderstyle  = \color[gray]{0}  \rmfamily  \itshape,
  frame               = single,
  rulecolor           = \color{black!67},
  numbers             = left,
  numberstyle         = \color{black!33},
  breaklines          = true,
}
\lstdefinestyle{Matlab-pygstyle}
{
  language            = \languageNormedDefd@mlpr,
  mllastelementstyle  = \color[RGB]{127,000,000}                   ,
  mlkeywordstyle      = \color[RGB]{000,127,000}\bfseries          ,
  mlcommentstyle      = \color[RGB]{063,127,127}           \itshape,
  mlstringstyle       = \color[RGB]{186,034,034}                   ,
  mlsyscomstyle       = \color[RGB]{000,127,000}                   ,
  mlsectiontitlestyle = \color[RGB]{063,127,127}           \itshape,
  mlsharedvarstyle    = \color[RGB]{034,034,186}                   ,
  mlplaceholderstyle  = \color[RGB]{127,063,127}\rmfamily  \itshape,
  frame               = single,
  rulecolor           = \color{black!67},
  numbers             = left,
  numberstyle         = \color{black!33},
  breaklines          = true,
}
\endinput
%%
%% End of file `matlab-prettifier.sty'.
